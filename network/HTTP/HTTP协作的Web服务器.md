# HTTP协作的Web服务器

## 1、单台主机实现多个域名

即使物理层面只有一台服务器，只要使用虚拟主机就可以模拟多台服务器。

域名通过DNS服务映射到IP地址（即域名解析），一台主机可以将IP地址和多个主机名绑定，因此一台主机可以通过不同的主机名模拟不同的服务器。不过在这种情况下，为了区分，需要在发送HTTP请求时在报文首部提供完整的主机名或域名。

## 2、代理、网关、隧道

### 2.1 代理

代理是一种有转发功能的应用程序，它扮演了客户端和服务器之间的‘中间人角色，接收由客户端发送的请求再转发给服务器，同时也接收服务器返回的响应并转发给客户端。

**代理服务器的基本行为就是接受客户端发送的请求，然后转发给其他服务器**。代理不改变请求URI，会直接发送给轻纺持有资源的目标服务器。

**缓存代理**

代理转发响应时，缓存代理会预先将资源的副本保存待代理服务器上

**透明代理**

转发请求或响应时，不对报文做任何加工的代理称为透明代理，否则为非透明代理。

**代理服务器工作流程**

- 当客户端A对web服务器请求时,此端提出请求时,此请求会首先发送到代理服务器

- 代理服务器接收到客户端请求后,会检查缓存中是否存有客户端所需要的数据

- 如果代理服务器没有客户端A所请求的数据,它将会向WEB器提交请求

- WEB服务器响应请求的数据

- 代理服务器向客户端A转发Web服务器的数据

### 2.2 网关

网关是转发其它服务器通信数据的服务器，接收从客户端发送的请求时，它就像自己拥有资源的源服务器一样，对客户端请求进行处理。有时客户端可能都不会察觉，自己的通信目标是一个网关。

网关的工作机制和代理十分相似。而**网关能使通信线路上的服务器提供非HTTP协议服务**。利用网关能提高通信的安全性， 因为**可以在客户端与网关之间的通信线路上加密**以确保连接的安全。

### 2.3 隧道

隧道是在相隔甚远的客户端和服务器之间进行中转，并保持双方通信连接的应用程序。

隧道可按要求建立起一条与其他服务器的通信线路， 届时使用 SSL等加密手段进行通信。 隧道的目的是确保客户端能与服务器进行安全的通信。

隧道本身不会去解析HTTP请求，而是保持原样中转给之后的服务器。隧道会在通信双方断开连接时结束。隧道本身是透明的，客户端不用在意隧道的存在。